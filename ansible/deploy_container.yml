- name: Deploy Docker Container
  hosts: all
  become: yes
  tasks:

    - name: Pull Nginx Docker Image
      community.docker.docker_image:
        name: nginx:latest
        source: pull

    - name: Copy Custom HTML File to Remote Server
      copy:
        src: ansible/index.html
        dest: /home/ec2-user/index.html

    - name: Run Nginx Container with Custom Web Page
      community.docker.docker_container:
        name: webserver
        image: nginx:latest
        state: started
        restart_policy: always
        ports:
          - "80:80"
        volumes:
          - "/home/ec2-user/index.html:/usr/share/nginx/html/index.html"
